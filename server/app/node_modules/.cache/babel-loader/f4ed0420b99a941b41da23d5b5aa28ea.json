{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\donov\\\\Desktop\\\\Projeto GitHub WebSocket Webchat\\\\webchat_donovan\\\\server\\\\app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\donov\\\\Desktop\\\\Projeto GitHub WebSocket Webchat\\\\webchat_donovan\\\\server\\\\app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\donov\\\\Desktop\\\\Projeto GitHub WebSocket Webchat\\\\webchat_donovan\\\\server\\\\app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\donov\\\\Desktop\\\\Projeto GitHub WebSocket Webchat\\\\webchat_donovan\\\\server\\\\app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\donov\\\\Desktop\\\\Projeto GitHub WebSocket Webchat\\\\webchat_donovan\\\\server\\\\app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\donov\\\\Desktop\\\\Projeto GitHub WebSocket Webchat\\\\webchat_donovan\\\\server\\\\app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\donov\\\\Desktop\\\\Projeto GitHub WebSocket Webchat\\\\webchat_donovan\\\\server\\\\app\\\\src\\\\views\\\\webchat-component.js\";\nimport React from 'react';\nimport context from '../services/context';\nimport '../assets/css/webchat.scss';\nimport obj from '../services/loading';\nimport { SOCKETIP } from '../services/server-access-configuration';\nimport openSocket from 'socket.io-client';\n\nvar $ = require('jquery');\n\nvar WebChat =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(WebChat, _React$Component);\n\n  function WebChat(props) {\n    var _this;\n\n    _classCallCheck(this, WebChat);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(WebChat).call(this, props));\n    _this.state = {\n      message: '',\n      messages: [{\n        from: 'Fulano',\n        message: 'Oiiii, tudo bem?'\n      }],\n      to: ''\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.sendMessage = _this.sendMessage.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.receiveMessages = _this.receiveMessages.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.socket = openSocket(SOCKETIP);\n    return _this;\n  }\n\n  _createClass(WebChat, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      (function (self, obj) {\n        self.socket.on('welcome', function (data) {\n          obj.closeLoading();\n          var username = self.context.username;\n          var msg = \"<p><span style={{color:'red'}}>Servidor</span> disse: <span style={{color:'orange'}}>\".concat(username, \" </span>entrou na sala!</p>\");\n          self.socket.emit('send_first_message', msg);\n        });\n        self.socket.on('receive_first_message', function (data) {\n          var obj = {\n            msg: data,\n            first: true\n          };\n          self.state.messages.push(obj);\n        });\n        self.socket.on('receive_message', function (data) {\n          var msg = {\n            from: data.from,\n            messages: data.message,\n            to: data.to\n          };\n          self.state.messages.push(data);\n        });\n      })(this, obj);\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      var target = event.target,\n          name = target.name,\n          value = target.value;\n    }\n  }, {\n    key: \"sendMessage\",\n    value: function sendMessage() {}\n  }, {\n    key: \"receiveMessages\",\n    value: function receiveMessages() {}\n  }, {\n    key: \"componentDidCatch\",\n    value: function componentDidCatch() {\n      $(\"footer\").removeClass(\"footer-fixed\");\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var state = this.state;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-12 col-sm-12 col-md-8 col-lg-8 col-xl-8 container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container-messages--style\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, state.messages.map(function (res, index) {\n        return React.createElement(\"div\", {\n          key: index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103\n          },\n          __self: this\n        }, state.messages.map(function (key, m) {\n          return m.first ? m.msg : m.message;\n        }), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        }));\n      })))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-12 col-sm-12 col-md-8 col-lg-8 col-xl-8 container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, \"Bem vindo: \", React.createElement(\"b\", {\n        style: {\n          color: 'Red'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, this.context.username)))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-12 col-sm-12 col-md-8 col-lg-8 col-xl-8 container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, \"Enviar mensagem para:\", React.createElement(\"select\", {\n        name: \"to\",\n        className: \"form-control\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"Todos\"))))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-12 col-sm-12 col-md-8 col-lg-8 col-xl-8 container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(\"textarea\", {\n        name: \"message\",\n        autoFocus: \"autoFocus\",\n        maxLength: \"1000\",\n        cols: \"10\",\n        rows: \"10\",\n        className: \"form-control\",\n        placeHolder: \"Publique alguma coisa - Ctrl + Enter para enviar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-12 col-sm-12 col-md-8 col-lg-8 col-xl-8 container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.sendMessage,\n        className: \"btn btn-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, \"Enviar\"))));\n    }\n  }]);\n\n  return WebChat;\n}(React.Component);\n\nWebChat.contextType = context;\nWebChat.defaultProps = {};\nexport { WebChat as default };","map":{"version":3,"sources":["C:\\Users\\donov\\Desktop\\Projeto GitHub WebSocket Webchat\\webchat_donovan\\server\\app\\src\\views\\webchat-component.js"],"names":["React","context","obj","SOCKETIP","openSocket","$","require","WebChat","props","state","message","messages","from","to","handleChange","bind","sendMessage","receiveMessages","socket","self","on","data","closeLoading","username","msg","emit","first","push","event","target","name","value","removeClass","map","res","index","key","m","color","Component","contextType","defaultProps"],"mappings":"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","sourcesContent":["\r\nimport React from 'react';\r\nimport context from '../services/context';\r\nimport '../assets/css/webchat.scss';\r\nimport obj from '../services/loading';\r\nimport {SOCKETIP as SOCKETIP} from '../services/server-access-configuration';\r\n\r\nimport openSocket from 'socket.io-client';\r\nvar $ = require('jquery');\r\n\r\nexport default class WebChat extends React.Component {\r\n\r\n    static contextType = context;\r\n\r\n    static defaultProps = { }\r\n\r\n    constructor(props) {\r\n\r\n        super(props);\r\n    \r\n        this.state = { \r\n            message:'',\r\n            messages:[{from:'Fulano',message:'Oiiii, tudo bem?'}],\r\n            to:''\r\n        };\r\n\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.sendMessage = this.sendMessage.bind(this);\r\n        this.receiveMessages = this.receiveMessages.bind(this);\r\n        this.socket = openSocket(SOCKETIP);\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n\r\n         (function(self,obj) {\r\n\r\n            self.socket.on('welcome',function(data) {\r\n                obj.closeLoading();\r\n\r\n                let username = self.context.username;\r\n                let msg = `<p><span style={{color:'red'}}>Servidor</span> disse: <span style={{color:'orange'}}>${username} </span>entrou na sala!</p>`;\r\n\r\n                self.socket.emit('send_first_message',msg);\r\n            });\r\n\r\n\r\n            self.socket.on('receive_first_message',(data) => {\r\n\r\n                var obj = {\r\n                    msg:data,\r\n                    first:true\r\n                }\r\n\r\n                self.state.messages.push(obj);\r\n            });  \r\n\r\n            self.socket.on('receive_message',(data) => {\r\n\r\n                var msg = {\r\n                    from:data.from,\r\n                    messages:data.message,\r\n                    to:data.to\r\n                };\r\n\r\n                self.state.messages.push(data);\r\n            });\r\n\r\n         })(this,obj);   \r\n    }\r\n\r\n    handleChange(event) {\r\n        const target = event.target,\r\n              name = target.name,\r\n              value = target.value;\r\n    }\r\n\r\n    sendMessage() {\r\n\r\n    }\r\n\r\n    receiveMessages() {\r\n        \r\n    }\r\n\r\n    componentDidCatch() {\r\n        $(\"footer\").removeClass(\"footer-fixed\");\r\n    }\r\n\r\n    render() {\r\n\r\n        const {state} = this;\r\n\r\n        return (\r\n            <div>\r\n\r\n                { /* Div com as mensagens */  }\r\n                <div className='row'>\r\n                    <div className='col-12 col-sm-12 col-md-8 col-lg-8 col-xl-8 container'>\r\n                        <div className='container-messages--style'>\r\n                         {\r\n                            state.messages.map((res,index) => {\r\n                                return (<div key={index}>\r\n                                          {state.messages.map((key, m) => {\r\n\r\n                                           return (m.first ? (m.msg):(m.message))\r\n\r\n                                           \r\n                                          })}\r\n                                          <br />\r\n                                         </div>)\r\n                            })\r\n                        }\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <br />\r\n                <div className='row'>\r\n                    <div className='col-12 col-sm-12 col-md-8 col-lg-8 col-xl-8 container'>\r\n                      <span>Bem vindo: <b style={{color:'Red'}}>{this.context.username}</b></span>\r\n                    </div>\r\n                </div>\r\n                    <br />\r\n                <div className='row'>\r\n                    <div className='col-12 col-sm-12 col-md-8 col-lg-8 col-xl-8 container'>\r\n                      <span>\r\n                            Enviar mensagem para: \r\n                            <select name='to' className='form-control'>\r\n                                <option value='0'>Todos</option>                            \r\n                            </select> \r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <br />\r\n                <div className='row'>\r\n                   <div className='col-12 col-sm-12 col-md-8 col-lg-8 col-xl-8 container'>\r\n                       <textarea name='message' autoFocus='autoFocus' maxLength='1000' cols='10' rows='10' className='form-control' placeHolder='Publique alguma coisa - Ctrl + Enter para enviar'></textarea>\r\n                    </div>\r\n                </div>              \r\n                <br />\r\n                <div className='row'>\r\n                    <div className='col-12 col-sm-12 col-md-8 col-lg-8 col-xl-8 container'>\r\n                      <button onClick={this.sendMessage} className='btn btn-primary'>Enviar</button>\r\n                    </div>\r\n                </div>  \r\n\r\n            </div>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}